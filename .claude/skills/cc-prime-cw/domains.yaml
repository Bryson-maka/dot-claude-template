# Domain Definitions for Context Priming Analysts
#
# This file contains BASE domain definitions that apply to most projects.
# Project-specific domains are auto-discovered by /cc-learn and stored
# in .claude/project_config.yaml, which is merged at runtime.
#
# To customize for your project:
# 1. Run /cc-learn to auto-discover patterns
# 2. Or manually add domains below
#
# The discovery script merges:
#   1. project_config.yaml domains (if exists) - highest priority
#   2. These base domains - fallback defaults

domains:
  # ========== Universal Base Domains ==========
  # These apply to nearly all software projects

  - name: source
    description: |
      Main application source code.
      Core business logic, primary modules, and entry points.
      Focus on understanding the main components and how they interact.
    patterns:
      # Common source directories - will be supplemented by project_config
      - "src/**/*"
      - "lib/**/*"
      - "app/**/*"
      - "pkg/**/*"
      - "internal/**/*"
    keywords:
      # Generic patterns that work across languages
      - "class\\s+\\w+"
      - "function\\s+|def\\s+|fn\\s+|func\\s+"
      - "import|from .* import|require|use\\s+"
      - "export|pub\\s+|public\\s+"
    report_sections:
      - main_components: "Primary classes, modules, and their responsibilities"
      - architecture_patterns: "Design patterns, code organization"
      - entry_points: "Main entry points and initialization"
      - key_abstractions: "Core abstractions and interfaces"

  - name: config
    description: |
      Configuration files and settings.
      Environment setup, build configuration, and project metadata.
      Includes dependency definitions and tooling configuration.
    patterns:
      - "*.json"
      - "*.yaml"
      - "*.yml"
      - "*.toml"
      - "*.ini"
      - "*.cfg"
      - ".env*"
      - "config/**/*"
      - "settings/**/*"
    keywords:
      - "version|name|description"
      - "dependencies|devDependencies|requires"
      - "scripts|commands|targets"
      - "config|settings|options|env"
    report_sections:
      - project_metadata: "Project name, version, description"
      - dependencies: "Key dependencies and their purposes"
      - build_config: "Build and compilation settings"
      - environment: "Environment variables and configuration"

  - name: tests
    description: |
      Test files and testing infrastructure.
      Unit tests, integration tests, fixtures, and test utilities.
      Understanding test patterns helps understand expected behavior.
    patterns:
      - "tests/**/*"
      - "test/**/*"
      - "spec/**/*"
      - "**/*_test.*"
      - "**/*.test.*"
      - "**/*.spec.*"
      - "**/test_*.*"
    keywords:
      - "def test_|fn test_|func Test|it\\(|describe\\("
      - "fixture|mock|Mock|patch|stub"
      - "assert|expect|should|must"
      - "beforeEach|afterEach|setUp|tearDown|before|after"
    report_sections:
      - test_structure: "How tests are organized"
      - fixtures: "Available fixtures and test utilities"
      - coverage_areas: "What functionality is tested"
      - test_patterns: "Common testing patterns used"

  - name: docs
    description: |
      Documentation files.
      README, guides, API documentation, and architectural docs.
      Provides context about intended usage and design decisions.
    patterns:
      - "README*"
      - "CLAUDE*"
      - "CONTRIBUTING*"
      - "CHANGELOG*"
      - "docs/**/*"
      - "doc/**/*"
      - "*.md"
    keywords:
      - "# |## |### "
      - "installation|usage|getting started"
      - "api|endpoint|method|function"
      - "architecture|design|overview"
    report_sections:
      - project_overview: "What the project does"
      - setup_instructions: "How to install and configure"
      - architecture_docs: "Design and architecture documentation"
      - api_docs: "API documentation if present"

  - name: scripts
    description: |
      Build scripts, automation, and tooling.
      CI/CD configuration, deployment scripts, and development tools.
    patterns:
      - "scripts/**/*"
      - "bin/**/*"
      - "tools/**/*"
      - "Makefile"
      - "makefile"
      - ".github/**/*"
      - ".gitlab-ci.yml"
      - "Dockerfile*"
      - "docker-compose*"
      - "*.sh"
    keywords:
      - "run|build|test|deploy|install"
      - "script|command|task|target"
      - "docker|container|image"
      - "ci|cd|workflow|pipeline"
    report_sections:
      - build_scripts: "Build and compilation scripts"
      - ci_cd: "CI/CD pipeline configuration"
      - dev_tools: "Development helper scripts"
      - deployment: "Deployment and container configuration"

# Metadata for the analyst system
analyst_config:
  # Maximum files to analyze per domain
  max_files_per_domain: 50

  # Priority order for analysis
  priority_order:
    - source
    - config
    - tests
    - docs
    - scripts

  # Report output format
  report_format: markdown
  include_line_numbers: true

  # Foundation documents - high-value docs read directly at session start
  foundation_patterns:
    - "README.md"
    - "README*"
    - "CLAUDE.md"
    - "CLAUDE*"
    - "CONTRIBUTING.md"
    - "ARCHITECTURE.md"
    - "docs/ARCHITECTURE.md"
    - "DESIGN.md"
    - "docs/DESIGN.md"

  # Project config file - merged with these base domains
  # Run /cc-learn to generate this file based on your project
  project_config_path: ".claude/project_config.yaml"
